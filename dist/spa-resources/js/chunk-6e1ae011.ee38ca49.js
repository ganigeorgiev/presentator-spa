(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e1ae011"],{"21d0":function(e,t,s){"use strict";var r=s("4064"),o=s.n(r);o.a},4064:function(e,t,s){},"79e4":function(e,t,s){},b193:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-body"},[s("project-sidebar",{attrs:{projectId:e.$route.params.projectId}}),s("main",{staticClass:"app-main"},[e.isPageLoaded?e._e():s("span",{staticClass:"loader loader-blend"}),e.isPageLoaded&&e.project.id>0?[s("header",{staticClass:"app-header"},[s("nav",{staticClass:"breadcrumbs"},[s("router-link",{staticClass:"breadcrumb-item",attrs:{to:{name:"projects"}}},[e._v(e._s(e.$t("Projects")))]),s("div",{staticClass:"breadcrumb-item editable active",attrs:{contenteditable:"true",spellcheck:"false",autocomplete:"off",title:e.$t("Click to edit"),"data-placeholder":e.project.title},on:{blur:e.updateProjectTitle,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.updateProjectTitle(t))}}},[e._v(e._s(e.project.title))]),s("div",{staticClass:"breadcrumb-item"},[e._v(e._s(e.$t("Prototypes")))])],1),s("div",{staticClass:"flex-fill-block"}),s("prototypes-switch",{ref:"prototypesSwitch",staticClass:"m-l-10",attrs:{projectId:e.project.id}})],1),e.isLoadingPrototypes||e.prototypes.length?e._e():s("div",{staticClass:"block txt-center"},[e._m(0),s("div",{staticClass:"content m-b-base"},[s("h4",[e._v(e._s(e.$t("The project does not have any prototypes yet.")))])]),s("button",{staticClass:"btn btn-lg btn-success btn-cons-xl btn-loader",attrs:{type:"button"},on:{click:function(t){t.preventDefault(),!e.$refs.prototypesSwitch||e.$refs.prototypesSwitch.openUpsertPopup()}}},[s("i",{staticClass:"fe fe-plus"}),s("span",{staticClass:"txt"},[e._v(e._s(e.$t("New prototype")))])])]),s("screens-listing")]:e._e(),s("div",{staticClass:"flex-fill-block"}),s("app-footer",{staticClass:"m-t-base"})],2)],1)},o=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("figure",{staticClass:"mockup m-t-base m-b-base"},[s("div",{staticClass:"mockup-bg"}),s("div",{staticClass:"browser secondary"}),s("div",{staticClass:"browser primary"},[s("i",{staticClass:"fe fe-layers"})])])}],i=(s("ac6a"),s("097d"),s("a481"),s("ade3")),a=s("2f62"),c=s("f744"),n=s("dd93"),l=s("438c"),p=s("051c"),d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.activePrototype?s("div",{directives:[{name:"shortcut",rawName:"v-shortcut.27",value:e.deselectAllScreens,expression:"deselectAllScreens",modifiers:{27:!0}},{name:"shortcut",rawName:"v-shortcut.ctrl.65",value:e.selectAllScreens,expression:"selectAllScreens",modifiers:{65:!0,ctrl:!0}}]},[e.withFilterBar?s("div",{staticClass:"search-bar"},[s("div",{staticClass:"search-input-wrapper",class:{active:e.searchTerm.length>0}},[s("span",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:e.$t("Clear"),expression:"$t('Clear')",modifiers:{left:!0}}],staticClass:"search-clear",on:{click:function(t){return t.preventDefault(),e.resetFilters()}}}),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.searchTerm,expression:"searchTerm",modifiers:{trim:!0}}],staticClass:"search-input",attrs:{type:"input",placeholder:e.$t("Search screens")},domProps:{value:e.searchTerm},on:{input:[function(t){t.target.composing||(e.searchTerm=t.target.value.trim())},e.onSearchInputChange],blur:function(t){return e.$forceUpdate()}}})])]):e._e(),s("div",{staticClass:"block txt-center txt-hint"},[s("span",{directives:[{name:"show",rawName:"v-show",value:!e.orderedScreens.length&&e.isLoadingScreens,expression:"!orderedScreens.length && isLoadingScreens"}],staticClass:"loader loader-lg loader-blend m-b-base"}),s("h4",{directives:[{name:"show",rawName:"v-show",value:e.hasActiveFilters&&!e.orderedScreens.length&&!e.isLoadingScreens,expression:"hasActiveFilters && !orderedScreens.length && !isLoadingScreens"}],staticClass:"m-b-25"},[e._v("\n            "+e._s(e.$t("No screens were found."))+"\n        ")])]),s("h5",{directives:[{name:"show",rawName:"v-show",value:!e.isLoadingScreens&&e.orderedScreens.length&&e.searchTerm.length>0,expression:"!isLoadingScreens && orderedScreens.length && searchTerm.length > 0"}],staticClass:"m-t-0 m-b-small"},[e._v("\n        "+e._s(e.$t('Search results for "{searchTerm}" ({totalFound}):',{searchTerm:e.searchTerm,totalFound:e.totalScreens}))+"\n    ")]),s("draggable",{staticClass:"boxes-list screens-list",attrs:{group:"screens",filter:".ignore-sort",draggable:".box-card",fallbackTolerance:2,fallbackOnBody:!0,forceFallback:!0,animation:200,touchStartThreshold:0,list:e.orderedScreens,disabled:e.hasActiveFilters},on:{change:e.onSortChange,start:e.onSortStart,end:e.onSortEnd}},[s("screen-upload",{directives:[{name:"show",rawName:"v-show",value:e.isUploadBoxVisible,expression:"isUploadBoxVisible"}],staticClass:"ignore-sort",class:{expanded:!e.orderedScreens.length},attrs:{slot:"header",prototypeId:e.activePrototype.id},on:{screenUploaded:e.onScreenUpload,screensQueueComplete:e.onScreensQueueComplete},slot:"header"}),e._l(e.orderedScreens,(function(t){return s("screen-box",{key:"screen_box"+t.id,attrs:{screen:t},on:{screenDelete:e.onScreenDelete}})}))],2),s("div",{staticClass:"block txt-center"},[s("button",{directives:[{name:"show",rawName:"v-show",value:e.hasActiveFilters,expression:"hasActiveFilters"}],staticClass:"btn btn-warning btn-lg btn-cons-xl m-l-small m-r-small",on:{click:function(t){return t.preventDefault(),e.resetFilters()}}},[s("span",{staticClass:"txt"},[e._v(e._s(e.$t("Reset filters")))])]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.hasMoreScreens,expression:"hasMoreScreens"}],staticClass:"btn btn-transp-primary btn-lg btn-cons-xl btn-loader m-l-small m-r-small",class:{"btn-loader-active":e.isLoadingScreens},on:{click:function(t){return t.preventDefault(),e.loadScreens(e.currentPage+1,!1)}}},[s("span",{staticClass:"txt"},[e._v(e._s(e.$t("Load more screens")))])])]),s("bulk-bar",{on:{screenDelete:e.onScreenDelete}})],1):e._e()},h=[],u=s("310e"),m=s.n(u),v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"floating-bar with-sidebar bulk-screen-bar",class:{active:e.totalSelectedScreens>0}},[s("div",{staticClass:"nav nav-left"},[s("span",{staticClass:"txt"},[e._v(e._s(e.$tc("1 screen selected | {count} screens selected",e.totalSelectedScreens)))]),e.movablePrototypes.length?s("button",{staticClass:"btn btn-border btn-sm btn-loader m-l-small",attrs:{type:"button"}},[s("span",{staticClass:"txt"},[e._v(e._s(e.$t("Move selected")))]),s("i",{staticClass:"fe fe-chevron-up m-l-5"}),s("toggler",{staticClass:"dropdown dropdown-wrapped dropdown-sm"},e._l(e.movablePrototypes,(function(t){return s("div",{key:t.id,staticClass:"dropdown-item",on:{click:function(s){return s.preventDefault(),e.moveScreensToPrototype(t.id)}}},[e._v(e._s(t.title))])})),0)],1):e._e(),e.totalSelectedScreens>0?s("button",{staticClass:"btn btn-transp-danger btn-sm m-l-small",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.deleteSelected()}}},[s("i",{staticClass:"fe fe-trash m-r-5"}),s("span",{staticClass:"txt"},[e._v(e._s(e.$t("Delete selected")))])]):e._e()]),s("div",{staticClass:"nav nav-right"},[s("div",{staticClass:"ctrl-item",on:{click:function(t){return t.preventDefault(),e.deselectAllScreens()}}},[s("span",{staticClass:"txt"},[e._v(e._s(e.$t("Reset selection")))]),s("i",{staticClass:"fe fe-x m-l-5"})])])])},y=[];function f(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function g(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?f(s,!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):f(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var b={name:"bulk-bar",data(){return{isMovingScreens:!1}},computed:g({},Object(a["d"])({selectedScreens:e=>e.screens.selectedScreens,prototypes:e=>e.prototypes.prototypes}),{},Object(a["c"])({activePrototype:"prototypes/activePrototype"}),{movablePrototypes(){if(!this.activePrototype)return this.prototypes;var e=[];for(let t in this.prototypes)this.prototypes[t].id!=this.activePrototype.id&&e.push(this.prototypes[t]);return e},totalSelectedScreens(){return this.selectedScreens.length}}),methods:g({},Object(a["b"])({deselectAllScreens:"screens/deselectAllScreens",setActivePrototypeId:"prototypes/setActivePrototypeId"}),{deleteSelected(){var e=1==this.totalSelectedScreens?this.$t("Do you really want to delete the selected screen?"):this.$t("Do you really want to delete the selected screens?"),t=this.$tc("Successfully deleted 1 screen. | Successfully deleted {count} screens.",this.totalSelectedScreens);if(!(this.totalSelectedScreens<=0)&&window.confirm(e)){for(let e=this.selectedScreens.length-1;e>=0;e--)c["a"].Screens.delete(this.selectedScreens[e]),this.$emit("screenDelete",this.selectedScreens[e]);this.$toast(t),this.deselectAllScreens()}},moveScreensToPrototype(e){var t=1==this.totalSelectedScreens?this.$t("Do you really want to move the selected screen?"):this.$t("Do you really want to move the selected screens?");if(!(this.totalSelectedScreens<=0)&&window.confirm(t)){this.isMovingScreens=!0;var s=[];for(let t in this.selectedScreens){let r=c["a"].Screens.update(this.selectedScreens[t],{prototypeId:e,order:0});s.push(r)}Promise.all(s).then(e=>{this.$toast(this.$tc("Successfully moved 1 screen. | Successfully moved {count} screens.",this.totalSelectedScreens))}).catch(e=>{1==this.totalSelectedScreens?this.$toast(this.$t("Unable to move the selected screen."),"danger"):this.$toast(this.$t("Unable to move all of the selected screens."),"danger")}).finally(()=>{this.isMovingScreens=!1,this.deselectAllScreens(),this.setActivePrototypeId(e)})}}})},S=b,P=s("2877"),w=Object(P["a"])(S,v,y,!1,null,null,null),C=w.exports,_=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"uploadContainer",staticClass:"box box-placeholder dz-clickable",class:{"dz-uploading":e.isUploading}},[s("div",{staticClass:"content"},[e.isUploading?[s("div",{staticClass:"progress-bar"}),s("p",{staticClass:"txt-hint"},[e._v(e._s(e.uploadProgress<100?e.$t("Uploading..."):e.$t("Upload completed.")))])]:[e._m(0),s("h3",{staticClass:"title"},[e._v(e._s(e.$t("Upload screens")))]),s("p",{staticClass:"txt-small txt-hint"},[e._v(e._s(e.$t("Drop or click here to upload new screens")))])]],2)])},O=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"icon"},[s("i",{staticClass:"fe fe-upload-cloud"})])}],$=s("79e3"),j=s.n($),x={name:"screen-upload",props:{prototypeId:{required:!0}},data(){return{dropzone:null,isUploading:!1,uploadProgress:0,successUploaded:0}},mounted(){this.initDropzone()},destroyed(){this.dropzone&&this.dropzone.destroy()},methods:{initDropzone(){j.a.autoDiscover=!1,this.dropzone=new j.a(this.$refs.uploadContainer,{url:c["a"].$baseUrl+"/screens",method:"post",paramName:"file",parallelUploads:1,uploadMultiple:!1,thumbnailWidth:null,thumbnailHeight:null,addRemoveLinks:!1,createImageThumbnails:!1,previewTemplate:'<div style="display: none"></div>'}),this.dropzone.on("addedfile",e=>{this.dropzone.options.headers=Object.assign(this.dropzone.options.headers||{},{Authorization:"Bearer "+c["a"].$token})}),this.dropzone.on("sending",(e,t,s)=>{s.append("prototypeId",this.prototypeId),this.isUploading||(this.isUploading=!0,this.uploadProgress=0,this.successUploaded=0)}),this.dropzone.on("totaluploadprogress",(e,t,s)=>{this.uploadProgress=e}),this.dropzone.on("queuecomplete",()=>{this.uploadProgress=100,setTimeout(()=>{this.isUploading=!1,this.$emit("screensQueueComplete",this.successUploaded)},200),this.successUploaded>0&&this.$toast(this.$tc("Successfully uploaded 1 screen. | Successfully uploaded {count} screens.",this.successUploaded))}),this.dropzone.on("error",(e,t,s)=>{var r=e.name+": "+n["a"].getNestedVal(t,"errors.file",this.$t("An error occurred while uploading the screen."));this.$toast(r,"danger")}),this.dropzone.on("success",(e,t)=>{this.successUploaded++,this.$emit("screenUploaded",t)})}}},k=x,D=Object(P["a"])(k,_,O,!1,null,null,null),A=D.exports,I=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"box box-card box-screen",class:{active:e.isScreenSelected},on:{mouseleave:function(t){!e.$refs.screenDropdown||e.$refs.screenDropdown.hide()}}},[s("figure",{staticClass:"box-thumb",on:{click:function(t){return t.ctrlKey?t.shiftKey||t.altKey||t.metaKey?null:(t.stopPropagation(),t.preventDefault(),e.toggleScreenSelection(e.screen.id)):null}}},[s("div",{staticClass:"crop-wrapper"},[e.screen.getImage("medium")?s("img",{staticClass:"img",attrs:{src:e.screen.getImage("medium"),alt:e.screen.title}}):s("i",{staticClass:"fe fe-image img"})]),s("div",{staticClass:"thumb-overlay"},[s("router-link",{staticClass:"overlay-ctrl",attrs:{to:{name:"screen",params:{prototypeId:e.screen.prototypeId,screenId:e.screen.id}}}}),s("router-link",{staticClass:"box-ctrl handle center",attrs:{to:{name:"screen",params:{prototypeId:e.screen.prototypeId,screenId:e.screen.id}}}},[s("i",{staticClass:"fe fe-eye"})]),s("div",{staticClass:"box-ctrl check top-left"},[s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.isScreenSelected,expression:"isScreenSelected"}],attrs:{type:"checkbox",id:"bulk_check_screen_"+e.screen.id},domProps:{checked:Array.isArray(e.isScreenSelected)?e._i(e.isScreenSelected,null)>-1:e.isScreenSelected},on:{change:function(t){var s=e.isScreenSelected,r=t.target,o=!!r.checked;if(Array.isArray(s)){var i=null,a=e._i(s,i);r.checked?a<0&&(e.isScreenSelected=s.concat([i])):a>-1&&(e.isScreenSelected=s.slice(0,a).concat(s.slice(a+1)))}else e.isScreenSelected=o}}}),s("label",{attrs:{for:"bulk_check_screen_"+e.screen.id}})])]),s("div",{staticClass:"box-ctrl handle top-right"},[s("i",{staticClass:"fe fe-more-horizontal"}),s("toggler",{ref:"screenDropdown",staticClass:"dropdown dropdown-sm"},[s("div",{staticClass:"dropdown-item link-danger",on:{click:function(t){return t.preventDefault(),e.deleteScreen()}}},[s("i",{staticClass:"fe fe-trash"}),s("span",{staticClass:"txt"},[e._v(e._s(e.$t("Delete")))])])])],1)],1)]),s("div",{staticClass:"box-content"},[s("router-link",{staticClass:"title",attrs:{to:{name:"screen",params:{prototypeId:e.screen.prototypeId,screenId:e.screen.id}}}},[e._v("\n            "+e._s(e.screen.title)+"\n        ")]),s("div",{staticClass:"meta"},[s("div",{staticClass:"meta-item"},[e._v(e._s(e.$t("Uploaded {date}",{date:e.screen.createdAtFromNow})))]),e.screenUnreadComments.length?s("div",{staticClass:"meta-item txt-danger",attrs:{title:e.$t("Unread comments")}},[s("i",{staticClass:"fe fe-message-circle"}),s("span",{staticClass:"txt"},[e._v(e._s(e.screenUnreadComments.length))])]):e._e()])],1)])},F=[],U=s("2714");function T(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function z(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?T(s,!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):T(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var N={name:"screen-box",props:{screen:{type:U["a"],required:!0}},computed:z({},Object(a["c"])({getUnreadCommentsForScreen:"notifications/getUnreadCommentsForScreen"}),{screenUnreadComments(){return this.getUnreadCommentsForScreen(this.screen.id)},isScreenSelected:{get(){return this.$store.getters["screens/isScreenSelected"](this.screen.id)},set(e){e?this.selectScreen(this.screen.id):this.deselectScreen(this.screen.id)}}}),methods:z({},Object(a["b"])({selectScreen:"screens/selectScreen",deselectScreen:"screens/deselectScreen",toggleScreenSelection:"screens/toggleScreenSelection"}),{deleteScreen(){this.screen.id&&window.confirm(this.$t('Do you really want to delete screen "{title}"?',{title:this.screen.title}))&&(c["a"].Screens.delete(this.screen.id),this.$toast(this.$t('Successfully deleted screen "{title}".',{title:this.screen.title})),this.deselectScreen(this.screen.id),this.$emit("screenDelete",this.screen.id))}})},L=N,E=Object(P["a"])(L,I,F,!1,null,null,null),q=E.exports;function M(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function V(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?M(s,!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):M(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}const B=200,H={isLoadingScreens:!1,searchTerm:"",currentPage:1,totalScreens:0};var R={name:"screens-listing",components:{"bulk-bar":C,"screen-upload":A,"screen-box":q,draggable:m.a},props:{withFilterBar:{type:Boolean,default:!0}},data(){return Object.assign({},H)},computed:V({},Object(a["d"])({selectedScreens:e=>e.screens.selectedScreens,screens:e=>e.screens.screens}),{},Object(a["c"])({getScreen:"screens/getScreen",orderedScreens:"screens/orderedScreens",activePrototype:"prototypes/activePrototype"}),{hasMoreScreens(){return this.totalScreens>this.orderedScreens.length},hasActiveFilters(){return this.searchTerm.length>0},isUploadBoxVisible(){return!this.hasActiveFilters&&(!this.isLoadingScreens||this.orderedScreens.length)}}),watch:{activePrototype(e,t){!e||t&&e.id==t.id||this.loadScreens()}},beforeMount(){this.loadScreens()},methods:V({},Object(a["b"])({setScreens:"screens/setScreens",appendScreens:"screens/appendScreens",addScreen:"screens/addScreen",removeScreen:"screens/removeScreen",selectScreen:"screens/selectScreen",selectAllScreens:"screens/selectAllScreens",deselectAllScreens:"screens/deselectAllScreens"}),{resetFilters(){this.searchTerm=H.searchTerm,this.loadScreens()},resetList(){this.totalScreens=H.totalScreens,this.currentPage=H.currentPage,this.setScreens([])},onSearchInputChange(e){this.searchTimeoutId&&clearTimeout(this.searchTimeoutId),this.searchTerm.length?(this.resetList(),this.isLoadingScreens=!0,this.searchTimeoutId=setTimeout(()=>{this.loadScreens()},250)):this.loadScreens()},loadScreens(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.activePrototype&&(t&&this.resetList(),this.isLoadingScreens=!0,c["a"].Screens.getList(e,B,{envelope:!0,"search[prototypeId]":this.activePrototype.id,"search[title]":this.withFilterBar?this.searchTerm:""}).then(e=>{this.appendScreens(n["a"].getNestedVal(e,"data.response",[])),this.totalScreens=n["a"].getNestedVal(e,"data.headers.x-pagination-total-count",0)||0,this.currentPage=n["a"].getNestedVal(e,"data.headers.x-pagination-current-page",1)||1}).catch(e=>{this.$errResponseHandler(e)}).finally(()=>{this.isLoadingScreens=!1}))},onScreenDelete(e){this.removeScreen(e),this.totalScreens--},onScreenUpload(e){e&&e.id&&(this.addScreen(e),this.totalScreens++)},onScreensQueueComplete(e){this.deselectAllScreens(),e>0&&this.$nextTick(()=>{var e=document.querySelector(".box-screen:last-child");e&&e.scrollIntoView({block:"nearest"})})},onSortStart(e){this.sortAnimationTimeoutId&&clearTimeout(this.sortAnimationTimeoutId),e.target&&e.target.classList.add("sort-started")},onSortEnd(e){this.sortAnimationTimeoutId&&clearTimeout(this.sortAnimationTimeoutId),this.sortAnimationTimeoutId=setTimeout(()=>{e.target&&e.target.classList.remove("sort-started")},350)},onSortChange(e){e&&e.moved&&e.moved.element&&this.updateScreenOrder(e.moved.element,e.moved.newIndex+1)},updateScreenOrder(e,t){if(e&&e.order!=t){if(t>e.order)for(let s=this.screens.length-1;s>=0;s--)this.screens[s].id!=e.id&&this.screens[s].order>e.order&&this.screens[s].order<=t&&this.$set(this.screens[s],"order",this.screens[s].order-1);else for(let s=this.screens.length-1;s>=0;s--)this.screens[s].id!=e.id&&this.screens[s].order<e.order&&this.screens[s].order>=t&&this.$set(this.screens[s],"order",this.screens[s].order+1);e.order=t,c["a"].Screens.update(e.id,{order:t})}}})},K=R,Q=(s("de38"),Object(P["a"])(K,d,h,!1,null,"24b954e3",null)),W=Q.exports,J=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"prototypes-switch"},[e.prototypes.length&&e.activePrototype?[s("span",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:e.$t("Prototype settings"),expression:"$t('Prototype settings')",modifiers:{left:!0}}],staticClass:"icon-btn m-r-10 m-t-5",on:{click:function(t){return t.preventDefault(),e.openUpsertPopup(e.activePrototype.id)}}},[s("i",{staticClass:"fe fe-settings"})]),s("div",{staticClass:"btn btn-primary btn-dropdown prototypes-ctrl"},[s("i",{staticClass:"fe",class:e.activePrototype.isForDesktop?"fe-monitor":"fe-smartphone"}),s("span",{staticClass:"txt m-l-5"},[e._v(e._s(e.activePrototype.title))]),s("toggler",{staticClass:"dropdown"},[e._l(e.prototypes,(function(t){return s("div",{key:t.id,staticClass:"dropdown-item",class:{active:e.activePrototype.id==t.id},on:{click:function(s){return s.preventDefault(),e.setActivePrototypeId(t.id)}}},[s("i",{staticClass:"fe",class:t.isForDesktop?"fe-monitor":"fe-smartphone"}),s("span",{staticClass:"txt"},[e._v(e._s(t.title))])])})),s("hr",{staticClass:"m-t-10"}),s("div",{staticClass:"dropdown-item",on:{click:function(t){return t.preventDefault(),e.openUpsertPopup()}}},[s("i",{staticClass:"fe fe-plus"}),s("span",{staticClass:"txt"},[e._v(e._s(e.$t("New prototype")))])])],2)],1)]:s("button",{staticClass:"btn btn-cons-lg btn-success",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.openUpsertPopup()}}},[s("i",{staticClass:"fe fe-plus"}),s("span",{staticClass:"txt"},[e._v(e._s(e.$t("New prototype")))])]),s("relocator",[s("prototype-upsert-popup",{ref:"upsertPopup",attrs:{projectId:e.projectId}})],1)],2)},G=[],X=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("form",{on:{submit:function(t){return t.preventDefault(),e.submitForm()}}},[s("popup",{ref:"popup",staticClass:"popup-sm",attrs:{closeOnEsc:!e.isProcessing,closeOnOverlay:!e.isProcessing,closeBtn:!e.isProcessing},scopedSlots:e._u([{key:"header",fn:function(){return[s("h4",{staticClass:"title"},[e._v(e._s(e.isUpdate?e.$t("Edit prototype"):e.$t("New prototype")))])]},proxy:!0},{key:"content",fn:function(){return[s("form-field",{staticClass:"form-group required",attrs:{name:"title"}},[s("label",{attrs:{for:"prototype_title"}},[e._v(e._s(e.$t("Title")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],staticClass:"required",attrs:{type:"text",id:"prototype_title"},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value)}}})]),s("form-field",{staticClass:"form-group required options-toggle",attrs:{name:"type"}},[s("label",[e._v(e._s(e.$t("Type")))]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("div",{staticClass:"toggle-item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"type"}],attrs:{type:"radio",name:"options",id:"type_desktop",value:"desktop"},domProps:{checked:e._q(e.type,"desktop")},on:{change:[function(t){e.type="desktop"},e.onTypeChange]}}),s("label",{attrs:{for:"type_desktop"}},[s("div",{staticClass:"icon"},[s("i",{staticClass:"fe fe-monitor"})]),s("div",{staticClass:"txt"},[e._v(e._s(e.$t("Desktop")))])])])]),s("div",{staticClass:"col-6"},[s("div",{staticClass:"toggle-item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"type"}],attrs:{type:"radio",name:"options",id:"type_mobile",value:"mobile"},domProps:{checked:e._q(e.type,"mobile")},on:{change:[function(t){e.type="mobile"},e.onTypeChange]}}),s("label",{attrs:{for:"type_mobile"}},[s("div",{staticClass:"icon"},[s("i",{staticClass:"fe fe-smartphone"})]),s("div",{staticClass:"txt"},[e._v(e._s(e.$t("Mobile device")))])])])])])]),"mobile"===e.type?s("div",{staticClass:"row"},[s("div",{class:"col-"+("other"===e.activeSize?"6":"12")},[s("div",{staticClass:"form-group"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.activeSize,expression:"activeSize"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.activeSize=t.target.multiple?s:s[0]}}},e._l(e.sizesList,(function(t,r){return s("option",{key:r,domProps:{value:r}},[e._v(e._s(e.$t(t.label)))])})),0)])]),"other"===e.activeSize?[s("div",{staticClass:"col-3"},[s("form-field",{attrs:{name:"width",showErrorMsg:!1}},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.width,expression:"width",modifiers:{number:!0}}],attrs:{type:"number",placeholder:e.$t("Width"),title:e.$t("Width"),min:"100",step:"1",required:""},domProps:{value:e.width},on:{input:function(t){t.target.composing||(e.width=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})])],1),s("div",{staticClass:"col-3"},[s("form-field",{attrs:{name:"height",showErrorMsg:!1}},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.height,expression:"height",modifiers:{number:!0}}],attrs:{type:"number",placeholder:e.$t("Height"),title:e.$t("Height"),min:"100",step:"1",required:""},domProps:{value:e.height},on:{input:function(t){t.target.composing||(e.height=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})])],1)]:e._e()],2):e._e(),"desktop"===e.type?s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.scaleFactor,expression:"scaleFactor"}],attrs:{type:"checkbox",id:"retina_rescale","true-value":"0.5","false-value":"1"},domProps:{checked:Array.isArray(e.scaleFactor)?e._i(e.scaleFactor,null)>-1:e._q(e.scaleFactor,"0.5")},on:{change:function(t){var s=e.scaleFactor,r=t.target,o=r.checked?"0.5":"1";if(Array.isArray(s)){var i=null,a=e._i(s,i);r.checked?a<0&&(e.scaleFactor=s.concat([i])):a>-1&&(e.scaleFactor=s.slice(0,a).concat(s.slice(a+1)))}else e.scaleFactor=o}}}),s("label",{attrs:{for:"retina_rescale"}},[s("span",{staticClass:"txt"},[e._v(e._s(e.$t("2x retina scale")))]),s("i",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:e.$t("For 2x pixel density designs"),expression:"$t('For 2x pixel density designs')",modifiers:{right:!0}}],staticClass:"fe fe-info link-hint m-l-5"})])]):s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.scaleFactor,expression:"scaleFactor"}],attrs:{type:"checkbox",id:"auto_rescale","true-value":"0","false-value":"1"},domProps:{checked:Array.isArray(e.scaleFactor)?e._i(e.scaleFactor,null)>-1:e._q(e.scaleFactor,"0")},on:{change:function(t){var s=e.scaleFactor,r=t.target,o=r.checked?"0":"1";if(Array.isArray(s)){var i=null,a=e._i(s,i);r.checked?a<0&&(e.scaleFactor=s.concat([i])):a>-1&&(e.scaleFactor=s.slice(0,a).concat(s.slice(a+1)))}else e.scaleFactor=o}}}),s("label",{attrs:{for:"auto_rescale"}},[s("span",{staticClass:"txt"},[e._v(e._s(e.$t("Auto scale")))]),s("i",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:e.$t("Auto scale/fit each screen to the device width"),expression:"$t('Auto scale/fit each screen to the device width')",modifiers:{right:!0}}],staticClass:"fe fe-info link-hint m-l-5"})])])]},proxy:!0},{key:"footer",fn:function(){return[s("button",{staticClass:"btn btn-light-border",class:{"btn-disabled":e.isProcessing},attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.close()}}},[s("span",{staticClass:"txt"},[e._v(e._s(e.$t("Cancel")))])]),e.isUpdate?s("span",{staticClass:"link-fade link-danger m-l-small",on:{click:function(t){return t.preventDefault(),e.deletePrototype(e.model.id)}}},[e._v(e._s(e.$t("Delete")))]):e._e(),s("div",{staticClass:"flex-fill-block"}),s("button",{staticClass:"btn btn-primary btn-cons btn-loader",class:{"btn-loader-active":e.isProcessing},attrs:{type:"submit"}},[s("span",{staticClass:"txt"},[e._v(e._s(e.isUpdate?e.$t("Update"):e.$t("Create")))])])]},proxy:!0}])})],1)},Y=[],Z=s("3905"),ee=s("72a1");function te(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function se(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?te(s,!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):te(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}const re=ee["a"].getSizesList(),oe={title:"",type:"desktop",width:100,height:100,scaleFactor:1,activeSize:Object.keys(re)[0]};var ie={name:"prototype-upsert-popup",components:{popup:Z["a"]},props:{projectId:{required:!0}},data(){return{model:new ee["a"],isProcessing:!1,sizesList:re,title:oe.title,type:oe.type,width:oe.width,height:oe.height,scaleFactor:oe.scaleFactor,activeSize:oe.activeSize}},computed:{isUpdate(){return this.model.id>0}},watch:{activeSize(e,t){this.onActiveSizeUpdate()}},beforeMount(){this.loadForm()},methods:se({},Object(a["b"])({updatePrototype:"prototypes/updatePrototype",removePrototype:"prototypes/removePrototype",addPrototype:"prototypes/addPrototype",setActivePrototypeId:"prototypes/setActivePrototypeId"}),{loadForm(e){e=e||this.model||{},this.title=n["a"].getNestedVal(e,"title",oe.title),this.type=n["a"].getNestedVal(e,"type",oe.type),this.width=n["a"].getNestedVal(e,"width",oe.width),this.height=n["a"].getNestedVal(e,"height",oe.height),this.scaleFactor=n["a"].getNestedVal(e,"scaleFactor",oe.scaleFactor),this.activeSize=n["a"].getNestedVal(e,"sizeKey",oe.activeSize)},open(e){this.isProcessing=!1,e instanceof ee["a"]?this.model=e:this.model=new ee["a"](e),this.loadForm(),this.$refs.popup.open()},close(){this.isProcessing=!1,this.$refs.popup.close()},onTypeChange(){this.scaleFactor=1,"mobile"==this.type&&(this.scaleFactor=0,this.width&&this.height||(this.activeSize=oe.activeSize),this.onActiveSizeUpdate())},onActiveSizeUpdate(){"other"!==this.activeSize&&(this.width=re[this.activeSize]["width"],this.height=re[this.activeSize]["height"])},submitForm(){this.isProcessing||(this.model.id?this.update():this.create())},update(){this.isProcessing=!0,c["a"].Prototypes.update(this.model.id,{title:this.title,type:this.type,width:this.width,height:this.height,scaleFactor:this.scaleFactor}).then(e=>{this.$toast(this.$t("Successfully updated prototype.")),this.close(),this.model.load(e.data),this.updatePrototype(e.data)}).catch(e=>{this.$errResponseHandler(e)}).finally(()=>{this.isProcessing=!1})},create(){this.isProcessing=!0,c["a"].Prototypes.create({projectId:this.projectId,title:this.title,type:this.type,width:this.width,height:this.height,scaleFactor:this.scaleFactor}).then(e=>{this.$toast(this.$t("Successfully created prototype.")),this.close(),this.model.load(e.data),this.addPrototype(e.data),this.setActivePrototypeId(e.data.id)}).catch(e=>{this.$errResponseHandler(e)}).finally(()=>{this.isProcessing=!1})},deletePrototype(){this.model.id&&window.confirm(this.$t('Do you really want to delete prototype "{title}"?',{title:this.model.title}))&&(this.close(),c["a"].Prototypes.delete(this.model.id),this.$toast(this.$t('Successfully deleteted prototype "{title}".',{title:this.model.title})),this.removePrototype(this.model.id))}})},ae=ie,ce=Object(P["a"])(ae,X,Y,!1,null,null,null),ne=ce.exports,le=s("11b2");function pe(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function de(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?pe(s,!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):pe(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var he={name:"prototypes-switch",components:{relocator:le["a"],"prototype-upsert-popup":ne},props:{projectId:{required:!0}},computed:de({},Object(a["d"])({prototypes:e=>e.prototypes.prototypes}),{},Object(a["c"])({getPrototype:"prototypes/getPrototype",activePrototype:"prototypes/activePrototype"})),methods:de({},Object(a["b"])({setActivePrototypeId:"prototypes/setActivePrototypeId"}),{openUpsertPopup(e){this.$refs.upsertPopup&&this.$refs.upsertPopup.open(e?this.getPrototype(e):null)}})},ue=he,me=(s("21d0"),Object(P["a"])(ue,J,G,!1,null,"cab1adbe",null)),ve=me.exports,ye=s("b76c");function fe(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function ge(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?fe(s,!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):fe(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var be={name:"prototype-view",mixins:[ye["a"]],components:{"app-footer":l["a"],"project-sidebar":p["a"],"screens-listing":W,"prototypes-switch":ve},data(){return{pageTitle:()=>this.$t("Prototypes"),isLoadingPrototypes:!1}},computed:ge({},Object(a["d"])({prototypes:e=>e.prototypes.prototypes}),{},Object(a["c"])({getPrototype:"prototypes/getPrototype",activePrototype:"prototypes/activePrototype"}),{isPageLoaded(){return!this.isLoadingProject&&!this.isLoadingPrototypes}}),watch:{"$route.params.projectId":function(e,t){e!=t&&this.init()},"$route.params.prototypeId":function(e,t){this.activePrototype&&e==this.activePrototype.id||this.setActivePrototypeId(e)},activePrototype(e,t){this.$router.replace({name:"prototype",params:Object.assign({},this.$route.params,{prototypeId:e?e.id:null})})}},beforeMount(){this.init()},methods:ge({},Object(a["b"])({setPrototypes:"prototypes/setPrototypes",setActivePrototypeId:"prototypes/setActivePrototypeId"}),{init(){this.loadProject(this.$route.params.projectId),this.loadPrototypes(this.$route.params.projectId,this.$route.params.prototypeId)},loadPrototypes(e,t){this.isLoadingPrototypes||(this.isLoadingPrototypes=!0,c["a"].Prototypes.getList(1,100,{"search[projectId]":e}).then(e=>{this.setPrototypes(e.data);let s=this.getPrototype(t);s?this.setActivePrototypeId(s.id):this.prototypes.length&&this.setActivePrototypeId(this.prototypes[this.prototypes.length-1].id),this.$router.replace({name:"prototype",params:Object.assign({},this.$route.params,{prototypeId:this.activePrototype?this.activePrototype.id:null})})}).catch(e=>{this.$errResponseHandler(e)}).finally(()=>{this.isLoadingPrototypes=!1}))}})},Se=be,Pe=Object(P["a"])(Se,r,o,!1,null,null,null);t["default"]=Pe.exports},de38:function(e,t,s){"use strict";var r=s("79e4"),o=s.n(r);o.a}}]);